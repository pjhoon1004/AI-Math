<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TF-IDF êµ¬í•˜ê¸° - í…ìŠ¤íŠ¸ ë°ì´í„°ì˜ ì´í•´</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/pretendard/1.3.9/static/pretendard.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f5f7fa;
            --bg-card: #ffffff;
            --bg-input: #f8f9fc;
            --accent-blue: #3b82f6;
            --accent-cyan: #06b6d4;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-orange: #f97316;
            --accent-pink: #ec4899;
            --accent-red: #ef4444;
            --accent-yellow: #eab308;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }

        header { text-align: center; margin-bottom: 40px; }

        .badge {
            display: inline-block;
            padding: 6px 16px;
            background: linear-gradient(135deg, rgba(249, 115, 22, 0.15), rgba(236, 72, 153, 0.15));
            border: 1px solid rgba(249, 115, 22, 0.3);
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--accent-orange);
            margin-bottom: 16px;
        }

        h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 800;
            background: linear-gradient(135deg, #f97316 0%, #ec4899 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .subtitle { font-size: 1rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title .icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .card-title .icon.blue { background: rgba(59, 130, 246, 0.15); }
        .card-title .icon.orange { background: rgba(249, 115, 22, 0.15); }

        /* Document Input */
        .documents-container { display: flex; flex-direction: column; gap: 12px; }

        .document-input {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .doc-label {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            color: white;
            flex-shrink: 0;
        }

        .doc-textarea {
            flex: 1;
            min-height: 60px;
            padding: 12px 14px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .doc-textarea:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .delete-btn {
            width: 40px;
            height: 40px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 10px;
            color: #ef4444;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .delete-btn:hover { background: rgba(239, 68, 68, 0.2); }
        .delete-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(249, 115, 22, 0.3);
        }

        .btn-secondary {
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-orange);
        }

        .btn-add {
            background: rgba(16, 185, 129, 0.1);
            border: 1px dashed rgba(16, 185, 129, 0.4);
            color: var(--accent-green);
            width: 100%;
            justify-content: center;
            margin-top: 10px;
        }

        .btn-add:hover { background: rgba(16, 185, 129, 0.2); }

        .button-group { display: flex; gap: 10px; margin-top: 16px; flex-wrap: wrap; }

        /* Options */
        .options-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 16px;
            padding: 16px;
            background: var(--bg-input);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .option-group { display: flex; align-items: center; gap: 12px; }

        .option-label {
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--accent-orange);
            cursor: pointer;
        }

        select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        input[type="text"] {
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        /* Step Flow */
        .step-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-input);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .step-item.active {
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink));
            color: white;
            border-color: transparent;
        }

        .step-arrow { color: var(--text-secondary); font-size: 18px; }

        /* Result Sections */
        .result-section { margin-bottom: 32px; }
        .result-section:last-child { margin-bottom: 0; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border-color);
        }

        .step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: white;
        }

        .step-number.step1 { background: var(--accent-blue); }
        .step-number.step2 { background: var(--accent-cyan); }
        .step-number.step3 { background: var(--accent-purple); }
        .step-number.step4 { background: var(--accent-green); }
        .step-number.step5 { background: var(--accent-pink); }

        .section-title { font-size: 1rem; font-weight: 700; }

        /* Document Display */
        .doc-display { display: flex; flex-direction: column; gap: 12px; }

        .doc-item {
            padding: 14px 18px;
            background: var(--bg-input);
            border-radius: 10px;
            border-left: 4px solid var(--accent-blue);
        }

        .doc-item-label {
            font-size: 12px;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 6px;
        }

        .doc-item-text { font-size: 14px; color: var(--text-primary); }

        /* Set Display */
        .set-container { display: flex; flex-direction: column; gap: 16px; }

        .set-item {
            padding: 16px 18px;
            background: var(--bg-input);
            border-radius: 10px;
            border-left: 4px solid var(--accent-cyan);
        }

        .set-item.universal {
            border-left-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.05);
        }

        .set-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .set-label {
            font-size: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .set-notation {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 18px;
            color: var(--accent-cyan);
        }

        .set-item.universal .set-notation { color: var(--accent-green); }

        .set-count {
            font-size: 12px;
            padding: 4px 10px;
            background: rgba(6, 182, 212, 0.1);
            border-radius: 20px;
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .set-item.universal .set-count {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .set-elements { display: flex; flex-wrap: wrap; gap: 8px; }

        .element-tag {
            padding: 6px 12px;
            background: white;
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--accent-cyan);
        }

        .set-item.universal .element-tag {
            border-color: rgba(16, 185, 129, 0.3);
            color: var(--accent-green);
        }

        /* Tables */
        .table-wrapper { overflow-x: auto; margin-bottom: 16px; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            min-width: 500px;
        }

        .data-table th, .data-table td {
            padding: 10px 8px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .data-table th {
            background: linear-gradient(135deg, rgba(249, 115, 22, 0.08), rgba(236, 72, 153, 0.08));
            font-weight: 600;
            font-size: 12px;
            position: sticky;
            top: 0;
        }

        .data-table td { background: white; }

        .data-table .label-cell {
            background: var(--bg-input);
            font-weight: 600;
            text-align: left;
            padding-left: 12px;
            position: sticky;
            left: 0;
            z-index: 1;
        }

        .data-table .highlight {
            background: rgba(249, 115, 22, 0.15);
            color: var(--accent-orange);
            font-weight: 700;
        }

        .data-table .highlight-green {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
            font-weight: 700;
        }

        .data-table .highlight-purple {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            font-weight: 700;
        }

        .data-table .highlight-pink {
            background: rgba(236, 72, 153, 0.15);
            color: var(--accent-pink);
            font-weight: 700;
        }

        .data-table .highlight-cyan {
            background: rgba(6, 182, 212, 0.15);
            color: var(--accent-cyan);
            font-weight: 700;
        }

        .data-table .highlight-yellow {
            background: rgba(234, 179, 8, 0.15);
            color: #a16207;
            font-weight: 700;
        }

        .data-table .zero-cell {
            color: #cbd5e1;
        }

        .data-table .section-header-cell {
            background: rgba(100, 116, 139, 0.1);
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Info Box */
        .info-box {
            padding: 14px 18px;
            background: rgba(249, 115, 22, 0.08);
            border: 1px solid rgba(249, 115, 22, 0.2);
            border-radius: 10px;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .info-box strong { color: var(--accent-orange); }

        .info-box.blue {
            background: rgba(59, 130, 246, 0.08);
            border-color: rgba(59, 130, 246, 0.2);
        }
        .info-box.blue strong { color: var(--accent-blue); }

        .info-box.purple {
            background: rgba(139, 92, 246, 0.08);
            border-color: rgba(139, 92, 246, 0.2);
        }
        .info-box.purple strong { color: var(--accent-purple); }

        .info-box.green {
            background: rgba(16, 185, 129, 0.08);
            border-color: rgba(16, 185, 129, 0.2);
        }
        .info-box.green strong { color: var(--accent-green); }

        .info-box.pink {
            background: rgba(236, 72, 153, 0.08);
            border-color: rgba(236, 72, 153, 0.2);
        }
        .info-box.pink strong { color: var(--accent-pink); }

        .info-box.cyan {
            background: rgba(6, 182, 212, 0.08);
            border-color: rgba(6, 182, 212, 0.2);
        }
        .info-box.cyan strong { color: var(--accent-cyan); }

        /* Formula Box */
        .formula-box {
            background: var(--bg-input);
            border-radius: 10px;
            padding: 16px 20px;
            margin-bottom: 16px;
            text-align: center;
        }

        .formula {
            font-family: 'Times New Roman', serif;
            font-size: 18px;
            color: var(--text-primary);
        }

        .formula sub { font-size: 12px; }

        /* Sub-step Box */
        .substep-box {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .substep-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .substep-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
        }

        .substep-badge.step-a { background: rgba(6, 182, 212, 0.15); color: var(--accent-cyan); }
        .substep-badge.step-b { background: rgba(234, 179, 8, 0.15); color: #a16207; }
        .substep-badge.step-c { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }

        /* Summary Cards */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .summary-card {
            padding: 16px;
            background: var(--bg-input);
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid;
        }

        .summary-card.tf { border-left-color: var(--accent-purple); }
        .summary-card.idf { border-left-color: var(--accent-green); }
        .summary-card.tfidf { border-left-color: var(--accent-pink); }

        .summary-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .summary-word {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .summary-card.tf .summary-word { color: var(--accent-purple); }
        .summary-card.idf .summary-word { color: var(--accent-green); }
        .summary-card.tfidf .summary-word { color: var(--accent-pink); }

        .summary-value {
            font-size: 24px;
            font-weight: 800;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 20px 15px; }
            .document-input { flex-wrap: wrap; }
            .doc-label { min-width: 60px; }
            .button-group { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .step-flow { gap: 4px; }
            .step-item { padding: 6px 12px; font-size: 12px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="badge">ì¸ê³µì§€ëŠ¥ ìˆ˜í•™</div>
            <h1>TF-IDF êµ¬í•˜ê¸°</h1>
            <p class="subtitle">í…ìŠ¤íŠ¸ ë°ì´í„°ì—ì„œ TF-IDFë¥¼ ì´ìš©í•´ì„œ ì¤‘ìš”í•œ ë‹¨ì–´ë¥¼ ì°¾ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤</p>
        </header>

        <!-- Input Section -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <div class="icon orange">ğŸ“</div>
                    ë¬¸ì„œ ì…ë ¥
                </div>
            </div>

            <div class="documents-container" id="documentsContainer"></div>

            <button class="btn btn-add" id="addDocBtn">
                <span>+</span> ë¬¸ì„œ ì¶”ê°€
            </button>

            <div class="options-section">
                <div class="option-row" style="width: 100%; display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start;">
                    <div class="option-group">
                        <span class="option-label">ğŸ“ IDF ê³„ì‚° ë°©ì‹:</span>
                        <select id="idfMethod">
                            <option value="simple">n / DF (ë‹¨ìˆœ ì—­ìˆ˜)</option>
                            <option value="log">logâ‚â‚€(n / DF) (ìƒìš©ë¡œê·¸)</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <span class="option-label">ğŸ† í•µì‹¬ ë‹¨ì–´ ê°œìˆ˜:</span>
                        <select id="topNWords">
                            <option value="2">ìƒìœ„ 2ê°œ</option>
                            <option value="3" selected>ìƒìœ„ 3ê°œ</option>
                            <option value="4">ìƒìœ„ 4ê°œ</option>
                            <option value="5">ìƒìœ„ 5ê°œ</option>
                            <option value="6">ìƒìœ„ 6ê°œ</option>
                            <option value="7">ìƒìœ„ 7ê°œ</option>
                            <option value="8">ìƒìœ„ 8ê°œ</option>
                            <option value="9">ìƒìœ„ 9ê°œ</option>
                            <option value="10">ìƒìœ„ 10ê°œ</option>
                        </select>
                    </div>
                </div>
                <div class="stopword-section" style="width: 100%; margin-top: 12px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start;">
                        <div class="option-group" style="flex-shrink: 0;">
                            <span class="option-label">âš™ï¸ ë¶ˆìš©ì–´ ì„¤ì •</span>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="removeStopwords">
                                <span>ë¶ˆìš©ì–´ ì œê±° ì ìš©</span>
                            </label>
                        </div>
                        <div class="option-group" style="flex: 1; min-width: 300px;">
                            <span class="option-label">ğŸš« ë¶ˆìš©ì–´ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)</span>
                            <input type="text" id="stopwordList" 
                                   value="ì€, ëŠ”, ì´, ê°€, ì„, ë¥¼, ì˜, ì—, ì™€, ê³¼, ë„, ë¡œ, ìœ¼ë¡œ, ì—ì„œ, ê¹Œì§€, ë¶€í„°, ì´ë‹¤, ì´ë©°"
                                   placeholder="ë¶ˆìš©ì–´ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥"
                                   style="width: 100%; padding: 10px 14px; border: 1px solid var(--border-color); border-radius: 8px; font-family: inherit; font-size: 14px;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" id="analyzeBtn">
                    <span>ğŸ”</span> ë¶„ì„í•˜ê¸°
                </button>
                <button class="btn btn-secondary" id="resetBtn">
                    <span>â†º</span> ì´ˆê¸°í™”
                </button>
                <button class="btn btn-secondary" id="exampleBtn">
                    <span>ğŸ“‹</span> ì˜ˆì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="card" id="resultsCard" style="display: none;">
            <div class="step-flow">
                <div class="step-item active">1. ë¬¸ì„œ</div>
                <span class="step-arrow">â†’</span>
                <div class="step-item active">2. ë‹¨ì–´ì§‘í•©</div>
                <span class="step-arrow">â†’</span>
                <div class="step-item active">3. TF</div>
                <span class="step-arrow">â†’</span>
                <div class="step-item active">4. IDF</div>
                <span class="step-arrow">â†’</span>
                <div class="step-item active">5. TF-IDF</div>
            </div>

            <div id="resultsContent"></div>
        </div>
    </div>

    <script>
        // State
        let documents = [
            { id: 1, text: '' },
            { id: 2, text: '' },
            { id: 3, text: '' }
        ];
        let nextId = 4;

        // DOM Elements
        const documentsContainer = document.getElementById('documentsContainer');
        const addDocBtn = document.getElementById('addDocBtn');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const resetBtn = document.getElementById('resetBtn');
        const exampleBtn = document.getElementById('exampleBtn');
        const idfMethodSelect = document.getElementById('idfMethod');
        const topNWordsSelect = document.getElementById('topNWords');
        const removeStopwordsCheckbox = document.getElementById('removeStopwords');
        const stopwordListInput = document.getElementById('stopwordList');
        const resultsCard = document.getElementById('resultsCard');
        const resultsContent = document.getElementById('resultsContent');

        function init() {
            renderDocuments();
            addEventListeners();
        }

        function renderDocuments() {
            documentsContainer.innerHTML = '';
            documents.forEach((doc, index) => {
                const div = document.createElement('div');
                div.className = 'document-input';
                div.innerHTML = `
                    <div class="doc-label">ë¬¸ì„œ ${String.fromCharCode(65 + index)}</div>
                    <textarea class="doc-textarea" data-id="${doc.id}" 
                              placeholder="ë¬¸ì„œ ${String.fromCharCode(65 + index)}ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">${doc.text}</textarea>
                    <button class="delete-btn" data-id="${doc.id}" ${documents.length <= 2 ? 'disabled' : ''}>Ã—</button>
                `;
                documentsContainer.appendChild(div);
            });
        }

        function addEventListeners() {
            addDocBtn.addEventListener('click', () => {
                documents.push({ id: nextId++, text: '' });
                renderDocuments();
            });

            analyzeBtn.addEventListener('click', analyze);
            resetBtn.addEventListener('click', reset);
            exampleBtn.addEventListener('click', loadExample);

            documentsContainer.addEventListener('input', (e) => {
                if (e.target.classList.contains('doc-textarea')) {
                    const id = parseInt(e.target.dataset.id);
                    const doc = documents.find(d => d.id === id);
                    if (doc) doc.text = e.target.value;
                }
            });

            documentsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('delete-btn') && !e.target.disabled) {
                    const id = parseInt(e.target.dataset.id);
                    if (documents.length > 2) {
                        documents = documents.filter(d => d.id !== id);
                        renderDocuments();
                    }
                }
            });
        }

        function reset() {
            documents = [{ id: 1, text: '' }, { id: 2, text: '' }, { id: 3, text: '' }];
            nextId = 4;
            renderDocuments();
            resultsCard.style.display = 'none';
        }

        function loadExample() {
            documents = [
                { id: 1, text: 'ì¸ê³µì§€ëŠ¥ì€ ìˆ˜í•™ì„ ì‚¬ìš©í•œë‹¤. ìˆ˜í•™ì€ ì¸ê³µì§€ëŠ¥ì˜ í•µì‹¬ì´ë‹¤. ê·¸ë˜ì„œ ì¸ê³µì§€ëŠ¥ì€ ì•„ì£¼ ë˜‘ë˜‘í•˜ë‹¤.' },
                { id: 2, text: 'ë°ì´í„°ëŠ” ìˆ˜í•™ì„ ì‚¬ìš©í•œë‹¤. ìˆ˜í•™ì€ ë°ì´í„°ì˜ ê¸°ì´ˆì´ë‹¤. ê·¸ë˜ì„œ ë°ì´í„°ëŠ” ì•„ì£¼ ìœ ìš©í•˜ë‹¤.' },
                { id: 3, text: 'ë¬¸ì¥ì€ ë‹¨ì–´ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ë‹¨ì–´ëŠ” ì˜ë¯¸ë¥¼ í‘œí˜„í•œë‹¤. ê·¸ë˜ì„œ ë¬¸ì¥ì€ ì˜ë¯¸ë¥¼ ì „ë‹¬í•œë‹¤.' }
            ];
            nextId = 4;
            renderDocuments();
            analyze();
        }

        // Text Processing
        function getStopwords() {
            const text = stopwordListInput.value;
            return text.split(',').map(w => w.trim()).filter(w => w.length > 0);
        }

        function removeStopwordsFromWord(word, stopwords) {
            let result = word;
            let changed = true;
            
            // ë°˜ë³µì ìœ¼ë¡œ ë‹¨ì–´ ëì—ì„œ ë¶ˆìš©ì–´(ì¡°ì‚¬) ì œê±°
            while (changed) {
                changed = false;
                for (const sw of stopwords) {
                    if (result.length > sw.length && result.endsWith(sw)) {
                        result = result.slice(0, -sw.length);
                        changed = true;
                        break;
                    }
                }
            }
            
            return result;
        }

        function tokenize(text, removeStopwordsFlag = false) {
            const cleaned = text.replace(/[.,!?;:'"()[\]{}]/g, ' ');
            let tokens = cleaned.split(/\s+/).filter(w => w.length > 0);
            
            if (removeStopwordsFlag) {
                const stopwords = getStopwords();
                // ê¸´ ë¶ˆìš©ì–´ë¶€í„° ì²˜ë¦¬í•˜ë„ë¡ ì •ë ¬
                const sortedStopwords = [...stopwords].sort((a, b) => b.length - a.length);
                tokens = tokens.map(w => removeStopwordsFromWord(w, sortedStopwords)).filter(w => w.length > 0);
            }
            
            return tokens;
        }

        function tokenizeWithInfo(text, removeStopwordsFlag = false) {
            const cleaned = text.replace(/[.,!?;:'"()[\]{}]/g, ' ');
            const allTokens = cleaned.split(/\s+/).filter(w => w.length > 0);
            const stopwords = getStopwords();
            const sortedStopwords = [...stopwords].sort((a, b) => b.length - a.length);
            
            const tokenInfo = allTokens.map(w => {
                const processed = removeStopwordsFromWord(w, sortedStopwords);
                const removedPart = w.slice(processed.length);
                return {
                    original: w,
                    word: processed,
                    removedSuffix: removedPart,
                    hasStopword: removedPart.length > 0
                };
            });
            
            const filteredTokens = removeStopwordsFlag 
                ? tokenInfo.map(t => t.word).filter(w => w.length > 0)
                : allTokens;
            
            return { tokenInfo, filteredTokens };
        }

        function getUniqueWords(words) {
            return [...new Set(words)];
        }

        function countFrequency(words) {
            const freq = {};
            words.forEach(w => {
                freq[w] = (freq[w] || 0) + 1;
            });
            return freq;
        }

        // Main Analysis
        function analyze() {
            const idfMethod = idfMethodSelect.value;
            const topN = parseInt(topNWordsSelect.value);
            const removeStopwords = removeStopwordsCheckbox.checked;
            const n = documents.filter(d => d.text.trim()).length;

            const docData = [];
            let allWords = [];

            documents.forEach((doc, index) => {
                if (doc.text.trim()) {
                    const label = String.fromCharCode(65 + index);
                    const { tokenInfo, filteredTokens } = tokenizeWithInfo(doc.text, removeStopwords);
                    const uniqueWords = getUniqueWords(filteredTokens);
                    const frequency = countFrequency(filteredTokens);

                    docData.push({
                        label,
                        originalText: doc.text,
                        tokenInfo,
                        tokens: filteredTokens,
                        set: uniqueWords,
                        frequency
                    });

                    allWords = allWords.concat(filteredTokens);
                }
            });

            if (docData.length < 2) {
                alert('ìµœì†Œ 2ê°œ ì´ìƒì˜ ë¬¸ì„œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const universalSet = getUniqueWords(allWords).sort((a, b) => a.localeCompare(b, 'ko'));

            // Calculate DF for each word
            const dfData = {};
            universalSet.forEach(word => {
                dfData[word] = docData.filter(d => d.set.includes(word)).length;
            });

            // Calculate DF/n (ìƒëŒ€ë„ìˆ˜)
            const dfRatioData = {};
            universalSet.forEach(word => {
                dfRatioData[word] = dfData[word] / n;
            });

            // Calculate n/DF
            const nDivDfData = {};
            universalSet.forEach(word => {
                nDivDfData[word] = n / dfData[word];
            });

            // Calculate IDF
            const idfData = {};
            universalSet.forEach(word => {
                if (idfMethod === 'log') {
                    idfData[word] = Math.log10(n / dfData[word]);
                } else {
                    idfData[word] = n / dfData[word];
                }
            });

            // Calculate TF-IDF for each document
            docData.forEach(d => {
                d.tfidf = {};
                universalSet.forEach(word => {
                    const tf = d.frequency[word] || 0;
                    d.tfidf[word] = tf * idfData[word];
                });
            });

            renderResults(docData, universalSet, dfData, dfRatioData, nDivDfData, idfData, n, idfMethod, removeStopwords, topN);
        }

        function renderResults(docData, universalSet, dfData, dfRatioData, nDivDfData, idfData, n, idfMethod, removeStopwords, topN) {
            resultsCard.style.display = 'block';

            let html = '';

            // Step 1: ì›ë³¸ ë¬¸ì„œ
            html += `
                <div class="result-section">
                    <div class="section-header">
                        <div class="step-number step1">1</div>
                        <div class="section-title">ë¬¸ì„œ</div>
                    </div>
                    <div class="info-box blue">
                        <strong>ğŸ’¡ ë¬¸ì„œ ì…ë ¥:</strong> ë¶„ì„í•  ë¬¸ì„œë“¤ì…ë‹ˆë‹¤. ì¡°ì‚¬ê¹Œì§€ í¬í•¨í•˜ì—¬ í† í° ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
                        ${removeStopwords ? '<br><span style="color: var(--accent-red);">â€» ë¶ˆìš©ì–´ ì œê±°ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. <s>ì·¨ì†Œì„ </s> í‘œì‹œëœ ë‹¨ì–´ëŠ” ë¶„ì„ì—ì„œ ì œì™¸ë©ë‹ˆë‹¤.</span>' : ''}
                    </div>
                    <div class="doc-display">
                        ${docData.map(d => `
                            <div class="doc-item">
                                <div class="doc-item-label">ë¬¸ì„œ ${d.label}</div>
                                <div class="doc-item-text">"${d.originalText}"</div>
                                ${removeStopwords ? `
                                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--border-color);">
                                    <span style="font-size: 12px; color: var(--text-secondary);">í† í°: </span>
                                    ${d.tokenInfo.map(t => t.hasStopword 
                                        ? `<span style="margin-right: 6px;"><span style="color: var(--accent-blue);">${t.word}</span><span style="text-decoration: line-through; color: #94a3b8;">${t.removedSuffix}</span></span>` 
                                        : `<span style="color: var(--accent-blue); margin-right: 6px;">${t.original}</span>`
                                    ).join('')}
                                </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                    <div class="info-box" style="margin-top: 16px;">
                        <strong>ğŸ“Œ ì¡°ê±´:</strong> ë¬¸ì„œ ìˆ˜ n = ${n}${removeStopwords ? ', ë¶ˆìš©ì–´ ì œê±° ì ìš©ë¨' : ', ë‹¨ì–´ ë¶„ë¦¬ í›„ ì¡°ì‚¬ë„ í•˜ë‚˜ì˜ í† í°ìœ¼ë¡œ í¬í•¨'}
                    </div>
                </div>
            `;

            // Step 2: ë‹¨ì–´ì§‘í•©
            html += `
                <div class="result-section">
                    <div class="section-header">
                        <div class="step-number step2">2</div>
                        <div class="section-title">ë‹¨ì–´ì§‘í•©</div>
                    </div>
                    <div class="info-box cyan">
                        <strong>ğŸ’¡ ë‹¨ì–´ì§‘í•©:</strong> ê° ë¬¸ì„œë¥¼ ë‹¨ì–´ë¡œ ë¶„ë¦¬í•˜ì—¬ ë‹¨ì–´ë¥¼ ì›ì†Œë¡œ í•˜ëŠ” ì§‘í•©ì„ ë§Œë“­ë‹ˆë‹¤. ì „ì²´ì§‘í•© UëŠ” ëª¨ë“  ë¬¸ì„œì˜ ë‹¨ì–´ë¥¼ í•©ì¹œ ê²ƒì…ë‹ˆë‹¤.
                    </div>
                    <div class="set-container">
                        ${docData.map(d => `
                            <div class="set-item">
                                <div class="set-header">
                                    <div class="set-label">
                                        <span class="set-notation">${d.label}</span>
                                        <span>= ë¬¸ì„œ ${d.label}ì˜ ë‹¨ì–´ì§‘í•©</span>
                                    </div>
                                    <span class="set-count">${d.set.length}ê°œ</span>
                                </div>
                                <div class="set-elements">
                                    ${d.set.map(w => `<span class="element-tag">${w}</span>`).join('')}
                                </div>
                            </div>
                        `).join('')}
                        <div class="set-item universal">
                            <div class="set-header">
                                <div class="set-label">
                                    <span class="set-notation">U</span>
                                    <span>= ì „ì²´ì§‘í•© (í•©ì§‘í•©)</span>
                                </div>
                                <span class="set-count">${universalSet.length}ê°œ</span>
                            </div>
                            <div class="set-elements">
                                ${universalSet.map(w => `<span class="element-tag">${w}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Step 3: TF (Term Frequency)
            html += `
                <div class="result-section">
                    <div class="section-header">
                        <div class="step-number step3">3</div>
                        <div class="section-title">TF êµ¬í•˜ê¸° (ë‹¨ì–´ ë¹ˆë„ìˆ˜)</div>
                    </div>
                    <div class="info-box purple">
                        <strong>ğŸ’¡ TF(Term Frequency):</strong> ê° ë¬¸ì„œì—ì„œ ë‹¨ì–´ê°€ ëª‡ ë²ˆ ë“±ì¥í–ˆëŠ”ì§€ ì„¸ëŠ” ê²ƒì…ë‹ˆë‹¤.
                    </div>
                    <div class="formula-box">
                        <div class="formula">TF(t, d) = ë¬¸ì„œ dì—ì„œ ë‹¨ì–´ tì˜ ë“±ì¥ íšŸìˆ˜</div>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    ${universalSet.map(word => `<th>${word}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${docData.map(d => `
                                    <tr>
                                        <td class="label-cell">TF(${d.label})</td>
                                        ${universalSet.map(word => {
                                            const val = d.frequency[word] || 0;
                                            return `<td class="${val >= 2 ? 'highlight-purple' : val === 0 ? 'zero-cell' : ''}">${val}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    <div class="info-box purple" style="margin-top: 16px;">
                        <strong>ğŸ“Œ TF í•´ì„:</strong> TF ê°’ì´ ë†’ë‹¤(2 ì´ìƒ)ëŠ” ê²ƒì€ í•´ë‹¹ ë‹¨ì–´ê°€ ë¬¸ì„œ ì•ˆì—ì„œ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µë˜ì–´ ë“±ì¥í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 
                        ê·¸ëŸ¬ë‚˜ TFê°€ ë†’ë‹¤ê³  í•´ì„œ í•­ìƒ ì¤‘ìš”í•œ ë‹¨ì–´ëŠ” ì•„ë‹™ë‹ˆë‹¤. ì¡°ì‚¬ë‚˜ ê³µí†µ ë‹¨ì–´ë„ TFê°€ ë†’ê²Œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                    </div>
                </div>
            `;

            // Step 4: IDF (with substeps)
            html += `
                <div class="result-section">
                    <div class="section-header">
                        <div class="step-number step4">4</div>
                        <div class="section-title">IDF êµ¬í•˜ê¸° (ì—­ë¬¸ì„œ ë¹ˆë„)</div>
                    </div>
                    <div class="info-box green">
                        <strong>ğŸ’¡ IDF(Inverse Document Frequency):</strong> ë‹¨ì–´ê°€ ì „ì²´ ë¬¸ì„œì—ì„œ ì–¼ë§ˆë‚˜ í¬ê·€í•œì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. 
                        ëª¨ë“  ë¬¸ì„œì— ë“±ì¥í•˜ëŠ” ë‹¨ì–´ëŠ” IDFê°€ ë‚®ê³ , íŠ¹ì • ë¬¸ì„œì—ë§Œ ë“±ì¥í•˜ëŠ” ë‹¨ì–´ëŠ” IDFê°€ ë†’ìŠµë‹ˆë‹¤.
                    </div>
                    
                    <!-- Substep A: DF -->
                    <div class="substep-box">
                        <div class="substep-title">
                            <span class="substep-badge step-a">â‘  DF</span>
                            <span>ë¬¸ì„œë¹ˆë„ìˆ˜ (Document Frequency)</span>
                        </div>
                        <div class="formula-box" style="margin-bottom: 12px;">
                            <div class="formula">DF(t) = ë‹¨ì–´ tê°€ ë“±ì¥í•˜ëŠ” ë¬¸ì„œì˜ ê°œìˆ˜</div>
                        </div>
                        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">
                            â†’ ë‹¨ì–´ê°€ ì–¼ë§ˆë‚˜ ë³´í¸ì ìœ¼ë¡œ ìì£¼ ë“±ì¥í–ˆëŠ”ê°€?
                        </p>
                    </div>
                    
                    <!-- Substep B: DF/n (ìƒëŒ€ë„ìˆ˜) -->
                    <div class="substep-box">
                        <div class="substep-title">
                            <span class="substep-badge step-b">â‘¡ DF/n</span>
                            <span>ìƒëŒ€ë„ìˆ˜</span>
                        </div>
                        <div class="formula-box" style="margin-bottom: 12px;">
                            <div class="formula">DF/n = ë¬¸ì„œ ì „ì²´ì—ì„œì˜ ìƒëŒ€ë„ìˆ˜ (n = ${n})</div>
                        </div>
                        <p style="font-size: 13px; color: var(--text-secondary);">
                            â†’ DF/n = 1 ì´ë©´ ëª¨ë“  ë¬¸ì„œì— ë“±ì¥, DF/n = 1/${n} ì´ë©´ í•˜ë‚˜ì˜ ë¬¸ì„œì—ë§Œ ë“±ì¥<br>
                            â†’ DF/n ê°’ì´ 1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ í”í•œ ë‹¨ì–´, 0ì— ê°€ê¹Œìš¸ìˆ˜ë¡ í¬ê·€í•œ ë‹¨ì–´
                        </p>
                    </div>
                    
                    <!-- Substep C: IDF -->
                    <div class="substep-box">
                        <div class="substep-title">
                            <span class="substep-badge step-c">â‘¢ IDF</span>
                            <span>ì—­ë¬¸ì„œ ë¹ˆë„ìˆ˜</span>
                        </div>
                        <div class="formula-box" style="margin-bottom: 12px;">
                            <div class="formula">
                                IDF(t) = n / DF(t) ${idfMethod === 'log' ? '&nbsp;&nbsp;ë˜ëŠ”&nbsp;&nbsp; IDF(t) = logâ‚â‚€(n / DF(t))' : ''}
                            </div>
                        </div>
                        <p style="font-size: 13px; color: var(--text-secondary);">
                            â†’ DFê°€ í¬ë©´ IDFê°€ ì‘ì•„ì§ (í”í•œ ë‹¨ì–´ = ëœ ì¤‘ìš”)<br>
                            â†’ DFê°€ ì‘ìœ¼ë©´ IDFê°€ ì»¤ì§ (í¬ê·€í•œ ë‹¨ì–´ = ë” ì¤‘ìš”)
                        </p>
                    </div>
                    
                    <!-- Combined IDF Table -->
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    ${universalSet.map(word => `<th>${word}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${docData.map(d => `
                                    <tr>
                                        <td class="label-cell">TF(${d.label})</td>
                                        ${universalSet.map(word => {
                                            const tf = d.frequency[word] || 0;
                                            return `<td class="${tf === 0 ? 'zero-cell' : ''}">${tf}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                                <tr>
                                    <td class="label-cell" style="background: rgba(6, 182, 212, 0.15);">DF</td>
                                    ${universalSet.map(word => {
                                        const df = dfData[word];
                                        return `<td class="highlight-cyan">${df}</td>`;
                                    }).join('')}
                                </tr>
                                <tr>
                                    <td class="label-cell" style="background: rgba(234, 179, 8, 0.15);">DF/n</td>
                                    ${universalSet.map(word => {
                                        const df = dfData[word];
                                        return `<td class="highlight-yellow">${df === n ? '1' : df + '/' + n}</td>`;
                                    }).join('')}
                                </tr>
                                <tr>
                                    <td class="label-cell" style="background: rgba(16, 185, 129, 0.15);">IDF${idfMethod === 'log' ? ' (log)' : ''}</td>
                                    ${universalSet.map(word => {
                                        const df = dfData[word];
                                        const idf = idfData[word];
                                        const isCommon = df === n;
                                        const isRare = df === 1;
                                        return `<td class="${isRare ? 'highlight-green' : isCommon ? 'zero-cell' : ''}">${idf.toFixed(2)}</td>`;
                                    }).join('')}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="info-box green" style="margin-top: 16px;">
                        <strong>ğŸ“Œ IDF í•´ì„:</strong><br>
                        â€¢ DF=${n}ì¸ ë‹¨ì–´(ëª¨ë“  ë¬¸ì„œì— ë“±ì¥)ëŠ” IDFê°€ ${idfMethod === 'log' ? '0' : '1'}ìœ¼ë¡œ ê°€ì¥ ë‚®ìŠµë‹ˆë‹¤.<br>
                        â€¢ DF=1ì¸ ë‹¨ì–´(í•˜ë‚˜ì˜ ë¬¸ì„œì—ë§Œ ë“±ì¥)ëŠ” IDFê°€ ${idfMethod === 'log' ? Math.log10(n).toFixed(2) : n}ìœ¼ë¡œ ê°€ì¥ ë†’ìŠµë‹ˆë‹¤.<br>
                        â€¢ IDFëŠ” ë§ì€ ë¬¸ì„œì— ë“±ì¥í•˜ëŠ” ë‹¨ì–´ì˜ ê°€ì¤‘ì¹˜ëŠ” ë‚®ì¶”ê³ , ì ì€ ë¬¸ì„œì—ë§Œ ë“±ì¥í•˜ëŠ” ë‹¨ì–´ì˜ ê°€ì¤‘ì¹˜ëŠ” ë†’ì´ëŠ” ì§€í‘œì…ë‹ˆë‹¤.
                    </div>
                </div>
            `;

            // Step 5: TF-IDF
            html += `
                <div class="result-section">
                    <div class="section-header">
                        <div class="step-number step5">5</div>
                        <div class="section-title">TF-IDF êµ¬í•˜ê¸°</div>
                    </div>
                    <div class="info-box pink">
                        <strong>ğŸ’¡ TF-IDF:</strong> TFì™€ IDFë¥¼ ê³±í•œ ê°’ìœ¼ë¡œ, í•´ë‹¹ ë¬¸ì„œì—ì„œ ë‹¨ì–´ê°€ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. 
                        ë¬¸ì„œ ë‚´ì—ì„œ ìì£¼ ë“±ì¥í•˜ë©´ì„œ(TFâ†‘) ë‹¤ë¥¸ ë¬¸ì„œì—ì„œëŠ” ë“œë¬¼ê²Œ ë“±ì¥í•˜ëŠ”(IDFâ†‘) ë‹¨ì–´ê°€ ë†’ì€ TF-IDF ê°’ì„ ê°€ì§‘ë‹ˆë‹¤.
                    </div>
                    <div class="formula-box">
                        <div class="formula">TF-IDF(t, d) = TF(t, d) Ã— IDF(t)</div>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    ${universalSet.map(word => `<th>${word}</th>`).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                ${docData.map(d => `
                                    <tr>
                                        <td class="label-cell">TF(${d.label})</td>
                                        ${universalSet.map(word => {
                                            const tf = d.frequency[word] || 0;
                                            return `<td class="${tf >= 2 ? 'highlight-purple' : tf === 0 ? 'zero-cell' : ''}">${tf}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                                <tr>
                                    <td class="label-cell">DF</td>
                                    ${universalSet.map(word => `<td>${dfData[word]}</td>`).join('')}
                                </tr>
                                <tr>
                                    <td class="label-cell">DF/n</td>
                                    ${universalSet.map(word => {
                                        const df = dfData[word];
                                        return `<td>${df === n ? '1' : df + '/' + n}</td>`;
                                    }).join('')}
                                </tr>
                                <tr>
                                    <td class="label-cell">IDF</td>
                                    ${universalSet.map(word => `<td>${idfData[word].toFixed(2)}</td>`).join('')}
                                </tr>
                                ${docData.map(d => `
                                    <tr>
                                        <td class="label-cell" style="background: rgba(236, 72, 153, 0.15);">TF-IDF(${d.label})</td>
                                        ${universalSet.map(word => {
                                            const tfidf = d.tfidf[word];
                                            const maxTfidf = Math.max(...docData.map(doc => doc.tfidf[word]));
                                            const isMax = tfidf === maxTfidf && tfidf > 0;
                                            return `<td class="${isMax && tfidf > 1 ? 'highlight-pink' : tfidf === 0 ? 'zero-cell' : ''}">${tfidf.toFixed(2)}</td>`;
                                        }).join('')}
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <div style="font-weight: 700; font-size: 15px; margin-bottom: 16px; color: var(--accent-pink);">ğŸ† ê° ë¬¸ì„œë³„ í•µì‹¬ ë‹¨ì–´ (TF-IDF ìƒìœ„ ${topN}ê°œ)</div>
                        <div class="summary-grid">
                            ${docData.map(d => {
                                const sorted = Object.entries(d.tfidf)
                                    .filter(([_, val]) => val > 0)
                                    .sort((a, b) => b[1] - a[1])
                                    .slice(0, topN);
                                return `
                                    <div style="background: var(--bg-input); border-radius: 12px; padding: 16px; border-left: 4px solid var(--accent-pink);">
                                        <div style="font-weight: 700; color: var(--accent-pink); margin-bottom: 12px;">ë¬¸ì„œ ${d.label}</div>
                                        ${sorted.length > 0 ? sorted.map(([word, val], i) => `
                                            <div style="display: flex; justify-content: space-between; padding: 6px 0; ${i < sorted.length - 1 ? 'border-bottom: 1px solid var(--border-color);' : ''}">
                                                <span style="font-weight: 600;">${i + 1}. ${word}</span>
                                                <span style="color: var(--accent-pink); font-weight: 700;">${val.toFixed(2)}</span>
                                            </div>
                                        `).join('') : '<div style="color: var(--text-secondary); font-size: 13px;">í‘œì‹œí•  ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</div>'}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    
                    <div class="info-box pink" style="margin-top: 20px;">
                        <strong>ğŸ“Œ TF-IDF ê²°ê³¼ í•´ì„:</strong><br>
                        â€¢ TF-IDF ê°’ì´ ë†’ì€ ë‹¨ì–´ëŠ” í•´ë‹¹ ë¬¸ì„œì˜ <strong>í•µì‹¬ ë‹¨ì–´</strong>ì…ë‹ˆë‹¤.<br>
                        â€¢ TF-IDF ê°’ì´ 0ì¸ ë‹¨ì–´ëŠ” í•´ë‹¹ ë¬¸ì„œì— ë“±ì¥í•˜ì§€ ì•Šê±°ë‚˜, ëª¨ë“  ë¬¸ì„œì— ê³µí†µìœ¼ë¡œ ë“±ì¥í•˜ì—¬ êµ¬ë³„ë ¥ì´ ì—†ëŠ” ë‹¨ì–´ì…ë‹ˆë‹¤.<br>
                        â€¢ "ê·¸ë˜ì„œ"ì™€ ê°™ì´ ëª¨ë“  ë¬¸ì„œì— ë“±ì¥í•˜ëŠ” ë‹¨ì–´(DF=${n})ëŠ” IDFê°€ ${idfMethod === 'log' ? '0ì´ ë˜ì–´ TF-IDFë„ 0' : '1ì´ ë˜ì–´ TF-IDFê°€ TFì™€ ê°™ì•„'}ì§‘ë‹ˆë‹¤.<br>
                        â€¢ ì´ í‘œëŠ” TF-IDFê°€ ë‹¨ìˆœíˆ ë§ì´ ë“±ì¥í•œ ë‹¨ì–´ê°€ ì•„ë‹ˆë¼, <strong>íŠ¹ì • ë¬¸ì„œì—ì„œë§Œ íŠ¹ì§•ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ë‹¨ì–´</strong>ë¥¼ ê°•ì¡°í•˜ëŠ” ì§€í‘œì„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
                    </div>
                </div>
            `;

            resultsContent.innerHTML = html;
        }

        init();
    </script>
</body>
</html>
